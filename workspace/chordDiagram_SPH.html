<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>Chord Diagram</title>

</head>

<body id="page">

<div id="main" role="main">
  <article class="entry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <h1 class="entry-title">Chord Diagram</h1>
      </header>
      <div class="entry-content">
        <div id="chart" style="width: 50%; margin: 0px auto; position: relative;"></div>

<p style="color:black; font-size: 100%; text-align: center;">This chord diagram shows pairwise similarity between documents in our full-text search system.</p>

<style>

#circle circle {
  fill: none;
  pointer-events: all;
}

.group path {
  fill-opacity: .5;
}

path.chord {
  stroke: #000;
  stroke-width: .25px;
}

#circle:hover path.fade {
  display: none;
}

</style>

<script src="http://d3js.org/d3.v2.min.js?2.8.1"></script>

<script>

var width = 720,
    height = 720,
    outerRadius = Math.min(width, height) / 2 - 10,
    innerRadius = outerRadius - 24;

var formatPercent = d3.format(".1%");

var arc = d3.svg.arc()
    .innerRadius(innerRadius)
    .outerRadius(outerRadius);

var layout = d3.layout.chord()
    .padding(.04)
    .sortSubgroups(d3.descending)
    .sortChords(d3.ascending);

var path = d3.svg.chord()
    .radius(innerRadius);

var svg = d3.select("#chart").append("svg")
    .attr("width", '100%')
    .attr("height", '100%')
    .attr('viewBox','0 0 '+(Math.min(width,height))+' '+Math.min(width,height))
    .attr('preserveAspectRatio','xMinYMin')
  .append("g")
    .attr("id", "circle")
    .attr("transform", "translate(" + (Math.min(width,height)/2) + "," + Math.min(width,height)/2 + ")");

svg.append("circle")
    .attr("r", outerRadius);

var cities = [{"name":"2015FoxC", "color":"#F781BF"}, {"name":"Efficient and Robust", "color":"#00F5FF"}, {"name":"2012HanemanP_thesis", "color":"#FFD700"}, {"name":"2010CostanzoL", "color":"#8B7E66"}];

var matrix = [
  [0, 5, 234, 458],
  [50, 0, 49, 1],
  [133, 2, 0, 4],
  [155, 4, 155, 0]
];

// Compute the chord layout.
layout.matrix(matrix);

// Add a group per neighborhood.
var group = svg.selectAll(".group")
    .data(layout.groups)
  .enter().append("g")
    .attr("class", "group")
    .on("mouseover", mouseover);

// // Add a mouseover title.
// group.append("title").text(function(d, i) {
//   return cities[i].name + ": " + formatPercent(d.value) + " of origins";
// });

// Add the group arc.
var groupPath = group.append("path")
    .attr("id", function(d, i) { return "group" + i; })
    .attr("d", arc)
    .style("fill", function(d, i) { return cities[i].color; });

// Add a text label.
var groupText = group.append("text")
    .attr("x", 6)
    .attr("dy", 15);

groupText.append("textPath")
    .attr("xlink:href", function(d, i) { return "#group" + i; })
    .text(function(d, i) { return cities[i].name; });

// // Remove the labels that don't fit. :(
// groupText.filter(function(d, i) { return groupPath[0][i].getTotalLength() / 2 - 16 < this.getComputedTextLength(); })
//     .remove();

// Add the chords.
var chord = svg.selectAll(".chord")
    .data(layout.chords)
  .enter().append("path")
    .attr("class", "chord")
    .style("fill", function(d) { return cities[d.source.index].color; })
    .attr("d", path);

// Add an elaborate mouseover title for each chord.
chord.append("title").text(function(d) {
  return cities[d.source.index].name
      + " â†’ " + cities[d.target.index].name
      + ": " + matrix[d.source.index][d.target.index];
});

function mouseover(d, i) {
  chord.classed("fade", function(p) {
    return p.source.index != i
        && p.target.index != i;
  });
}



</script>


      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
  </article>
</div><!-- /#main -->

</body>
</html>
